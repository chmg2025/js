let $ = new Env('ÈÄöÊùÄ')

const _0xebe2=['aW5mbw==','cU5iZWc=','eVRlb2E=','dHJhY2U=','Vnp6bGY=','TGRBSHM=','cmV0dXJuIC8iICsgdGhpcyArICIv','VVNrY2U=','c3BsaXQ=','a0JlU3c=','c0ZOWmc=','VnhUTnQ=','cWdURUc=','bG9n','Ym9keQ==','YlBlVkQ=','ZmV0Y2g=','ZWtXWEc=','RXl2YWk=','Y29uc29sZQ==','YmZSamw=','T2dya1A=','ZXhjZXB0aW9u','YXBwbHk=','Y29uc3RydWN0b3I=','bHJWWFU=','aUxHQ0Q=','d0tHTnE=','ZXJyb3I=','SEpmc2E=','TFdycXM=','VmdSbko=','Znl1RWI=','ZGVidWc=','UUtCdVc=','6KeG6aKR5bey6Kej6ZSB','aHR0cHM6Ly9sb25nLg==','eEp2ekY=','e30uY29uc3RydWN0b3IoInJldHVybiB0aGlzIikoICk=','dGhlbg==','c0h0T3Q=','eHdFYlk=','eW1lZ0w=','RVFBVVQ=','UmV5b0g=','c0hsR1k=','Y29tcGlsZQ==','alBLT1A=','cHF4b2U=','TGZyTlA=','ZG55S3Q=','eEJvVEo=','cmV0dXJuIChmdW5jdGlvbigpIA==','aUpLanY=','ZlhGWmI=','S2xjSlM=','dGVzdA==','ZG9uZQ==','cEFkRlM=','TkhjZ2s=','d2Fybg==','Nnw0fDF8M3wyfDd8NXww','U1Z1VWg=','dGFibGU='];(function(_0x5c8d49,_0xebe2a){const _0x2a0658=function(_0x4bbe17){while(--_0x4bbe17){_0x5c8d49['push'](_0x5c8d49['shift']());}};const _0x36af53=function(){const _0xaa018c={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x2eef46,_0x1e38bb,_0x1cab97,_0x241682){_0x241682=_0x241682||{};let _0x5356e8=_0x1e38bb+'='+_0x1cab97;let _0x9b1e6f=0x0;for(let _0x25fea3=0x0,_0x119df7=_0x2eef46['length'];_0x25fea3<_0x119df7;_0x25fea3++){const _0x1706f2=_0x2eef46[_0x25fea3];_0x5356e8+=';\x20'+_0x1706f2;const _0x54ac5d=_0x2eef46[_0x1706f2];_0x2eef46['push'](_0x54ac5d);_0x119df7=_0x2eef46['length'];if(_0x54ac5d!==!![]){_0x5356e8+='='+_0x54ac5d;}}_0x241682['cookie']=_0x5356e8;},'removeCookie':function(){return'dev';},'getCookie':function(_0x9b3540,_0x36222f){_0x9b3540=_0x9b3540||function(_0x53fcb1){return _0x53fcb1;};const _0x26d420=_0x9b3540(new RegExp('(?:^|;\x20)'+_0x36222f['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x683fba=function(_0xd74a39,_0x340757){_0xd74a39(++_0x340757);};_0x683fba(_0x2a0658,_0xebe2a);return _0x26d420?decodeURIComponent(_0x26d420[0x1]):undefined;}};const _0x2efacf=function(){const _0x3087f4=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x3087f4['test'](_0xaa018c['removeCookie']['toString']());};_0xaa018c['updateCookie']=_0x2efacf;let _0x45613e='';const _0x107684=_0xaa018c['updateCookie']();if(!_0x107684){_0xaa018c['setCookie'](['*'],'counter',0x1);}else if(_0x107684){_0x45613e=_0xaa018c['getCookie'](null,'counter');}else{_0xaa018c['removeCookie']();}};_0x36af53();}(_0xebe2,0x1e9));const _0x2a06=function(_0x5c8d49,_0xebe2a){_0x5c8d49=_0x5c8d49-0x0;let _0x2a0658=_0xebe2[_0x5c8d49];if(_0x2a06['QcdpMj']===undefined){(function(){const _0x4bbe17=function(){let _0x45613e;try{_0x45613e=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x107684){_0x45613e=window;}return _0x45613e;};const _0xaa018c=_0x4bbe17();const _0x2efacf='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0xaa018c['atob']||(_0xaa018c['atob']=function(_0x2eef46){const _0x1e38bb=String(_0x2eef46)['replace'](/=+$/,'');let _0x1cab97='';for(let _0x241682=0x0,_0x5356e8,_0x9b1e6f,_0x25fea3=0x0;_0x9b1e6f=_0x1e38bb['charAt'](_0x25fea3++);~_0x9b1e6f&&(_0x5356e8=_0x241682%0x4?_0x5356e8*0x40+_0x9b1e6f:_0x9b1e6f,_0x241682++%0x4)?_0x1cab97+=String['fromCharCode'](0xff&_0x5356e8>>(-0x2*_0x241682&0x6)):0x0){_0x9b1e6f=_0x2efacf['indexOf'](_0x9b1e6f);}return _0x1cab97;});}());_0x2a06['FvLmMK']=function(_0x119df7){const _0x1706f2=atob(_0x119df7);let _0x54ac5d=[];for(let _0x9b3540=0x0,_0x36222f=_0x1706f2['length'];_0x9b3540<_0x36222f;_0x9b3540++){_0x54ac5d+='%'+('00'+_0x1706f2['charCodeAt'](_0x9b3540)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x54ac5d);};_0x2a06['jFNkRV']={};_0x2a06['QcdpMj']=!![];}const _0x36af53=_0x2a06['jFNkRV'][_0x5c8d49];if(_0x36af53===undefined){const _0x26d420=function(_0x683fba){this['PctraD']=_0x683fba;this['gLBIIP']=[0x1,0x0,0x0];this['aSJYpu']=function(){return'newState';};this['CLUTzg']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*';this['JaLasG']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x26d420['prototype']['edElHh']=function(){const _0x53fcb1=new RegExp(this['CLUTzg']+this['JaLasG']);const _0xd74a39=_0x53fcb1['test'](this['aSJYpu']['toString']())?--this['gLBIIP'][0x1]:--this['gLBIIP'][0x0];return this['ErsmSt'](_0xd74a39);};_0x26d420['prototype']['ErsmSt']=function(_0x340757){if(!Boolean(~_0x340757)){return _0x340757;}return this['ShptIE'](this['PctraD']);};_0x26d420['prototype']['ShptIE']=function(_0x3087f4){for(let _0x122fc1=0x0,_0x32a66c=this['gLBIIP']['length'];_0x122fc1<_0x32a66c;_0x122fc1++){this['gLBIIP']['push'](Math['round'](Math['random']()));_0x32a66c=this['gLBIIP']['length'];}return _0x3087f4(this['gLBIIP'][0x0]);};new _0x26d420(_0x2a06)['edElHh']();_0x2a0658=_0x2a06['FvLmMK'](_0x2a0658);_0x2a06['jFNkRV'][_0x5c8d49]=_0x2a0658;}else{_0x2a0658=_0x36af53;}return _0x2a0658;};const _0x2eef46=function(){const _0xa01eeb={};_0xa01eeb[_0x2a06('0x3')]=function(_0x5031c8,_0x4e4b72){return _0x5031c8!==_0x4e4b72;};const _0x2557ac=_0xa01eeb;let _0x16d72d=!![];return function(_0x28ec4b,_0xa632e7){const _0x634f75={};_0x634f75[_0x2a06('0x31')]=function(_0x34887c,_0x59a2b9){return _0x2557ac[_0x2a06('0x3')](_0x34887c,_0x59a2b9);};_0x634f75['bqXsM']=_0x2a06('0x30');const _0x28478d=_0x634f75;const _0xd3d596=_0x16d72d?function(){if(_0x28478d[_0x2a06('0x31')](_0x2a06('0x2c'),_0x28478d['bqXsM'])){if(_0xa632e7){const _0x24ff45=_0xa632e7[_0x2a06('0x2e')](_0x28ec4b,arguments);_0xa632e7=null;return _0x24ff45;}}else{const _0xc51e2f=_0xa632e7[_0x2a06('0x2e')](_0x28ec4b,arguments);_0xa632e7=null;return _0xc51e2f;}}:function(){};_0x16d72d=![];return _0xd3d596;};}();const _0x107684=_0x2eef46(this,function(){const _0x4e2e30={};_0x4e2e30[_0x2a06('0x32')]=_0x2a06('0x1d');_0x4e2e30['SVuUh']='^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}';_0x4e2e30[_0x2a06('0x21')]=function(_0x42b520){return _0x42b520();};const _0x3ab8e1=_0x4e2e30;const _0x23499a=function(){const _0x1c4eac=_0x23499a[_0x2a06('0x2f')](_0x3ab8e1[_0x2a06('0x32')])()[_0x2a06('0x5')](_0x3ab8e1[_0x2a06('0x15')]);return!_0x1c4eac[_0x2a06('0xf')](_0x107684);};return _0x3ab8e1[_0x2a06('0x21')](_0x23499a);});_0x107684();const _0xaa018c=function(){const _0x16db3a={};_0x16db3a[_0x2a06('0x19')]=function(_0x3a89ea,_0x55ebad){return _0x3a89ea===_0x55ebad;};_0x16db3a[_0x2a06('0x3f')]='ZzDgY';_0x16db3a[_0x2a06('0x2')]='return\x20/\x22\x20+\x20this\x20+\x20\x22/';_0x16db3a['xwEbY']='^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}';_0x16db3a[_0x2a06('0x12')]=function(_0x1623bf,_0x28d331){return _0x1623bf!==_0x28d331;};_0x16db3a[_0x2a06('0x1c')]=_0x2a06('0x20');const _0x4e45fd=_0x16db3a;let _0x38acd2=!![];return function(_0x76c1f2,_0x4c10e9){const _0x4bf098={};_0x4bf098[_0x2a06('0x4')]=function(_0x50c47d,_0x284273){return _0x4e45fd[_0x2a06('0x19')](_0x50c47d,_0x284273);};_0x4bf098[_0x2a06('0xa')]=_0x4e45fd[_0x2a06('0x3f')];_0x4bf098[_0x2a06('0x1')]=_0x4e45fd['EQAUT'];_0x4bf098[_0x2a06('0x11')]=_0x4e45fd[_0x2a06('0x0')];const _0x52e88e=_0x4bf098;if(_0x4e45fd[_0x2a06('0x12')](_0x2a06('0x36'),_0x4e45fd[_0x2a06('0x1c')])){const _0x5db156=_0x38acd2?function(){if(_0x4c10e9){if(_0x52e88e['sHlGY'](_0x52e88e[_0x2a06('0xa')],_0x2a06('0x22'))){const _0x219ff6={};_0x219ff6['log']=func;_0x219ff6[_0x2a06('0x13')]=func;_0x219ff6['debug']=func;_0x219ff6['info']=func;_0x219ff6[_0x2a06('0x33')]=func;_0x219ff6[_0x2a06('0x2d')]=func;_0x219ff6[_0x2a06('0x16')]=func;_0x219ff6[_0x2a06('0x1a')]=func;return _0x219ff6;}else{const _0x419a74=_0x4c10e9[_0x2a06('0x2e')](_0x76c1f2,arguments);_0x4c10e9=null;return _0x419a74;}}}:function(){};_0x38acd2=![];return _0x5db156;}else{const _0x412adc=test['constructor'](_0x52e88e['ymegL'])()['compile'](_0x52e88e[_0x2a06('0x11')]);return!_0x412adc[_0x2a06('0xf')](_0x107684);}};}();const _0x4bbe17=_0xaa018c(this,function(){const _0x4abb1c={};_0x4abb1c[_0x2a06('0xc')]=function(_0x573a3c,_0x11d251){return _0x573a3c===_0x11d251;};_0x4abb1c[_0x2a06('0x28')]=_0x2a06('0x23');_0x4abb1c[_0x2a06('0x9')]=_0x2a06('0x3a');_0x4abb1c['qNbeg']=function(_0x4a141e,_0x4b1357){return _0x4a141e(_0x4b1357);};_0x4abb1c['xJvzF']=function(_0x3cc1b5,_0x24ebf6){return _0x3cc1b5+_0x24ebf6;};_0x4abb1c[_0x2a06('0xd')]=_0x2a06('0xb');_0x4abb1c[_0x2a06('0x1b')]=function(_0x4439d9){return _0x4439d9();};_0x4abb1c[_0x2a06('0x29')]=_0x2a06('0xe');_0x4abb1c[_0x2a06('0x7')]=function(_0x24fba2,_0x177c37){return _0x24fba2!==_0x177c37;};_0x4abb1c[_0x2a06('0x39')]='cQvVW';_0x4abb1c[_0x2a06('0x2b')]=_0x2a06('0x8');_0x4abb1c['oJrOR']=function(_0x230900,_0x5219ac){return _0x230900===_0x5219ac;};_0x4abb1c[_0x2a06('0x37')]=_0x2a06('0x35');_0x4abb1c[_0x2a06('0x6')]=_0x2a06('0x1e');const _0x2609cc=_0x4abb1c;const _0x403f21=function(){};let _0x149edd;try{const _0x1414d2=_0x2609cc[_0x2a06('0x18')](Function,_0x2609cc[_0x2a06('0x3c')](_0x2609cc[_0x2a06('0xd')],_0x2a06('0x3d'))+');');_0x149edd=_0x2609cc['Vzzlf'](_0x1414d2);}catch(_0x354e1e){if(_0x2609cc[_0x2a06('0xc')](_0x2a06('0xe'),_0x2609cc['Eyvai'])){_0x149edd=window;}else{const _0x5db9a7=fn[_0x2a06('0x2e')](context,arguments);fn=null;return _0x5db9a7;}}if(!_0x149edd[_0x2a06('0x2a')]){if(_0x2609cc[_0x2a06('0x7')](_0x2609cc['QKBuW'],_0x2609cc[_0x2a06('0x2b')])){_0x149edd[_0x2a06('0x2a')]=function(_0xfff3){if(_0x2609cc[_0x2a06('0xc')](_0x2609cc[_0x2a06('0x28')],_0x2a06('0x34'))){_0x149edd[_0x2a06('0x2a')][_0x2a06('0x24')]=_0xfff3;_0x149edd[_0x2a06('0x2a')]['warn']=_0xfff3;_0x149edd[_0x2a06('0x2a')][_0x2a06('0x38')]=_0xfff3;_0x149edd['console'][_0x2a06('0x17')]=_0xfff3;_0x149edd['console']['error']=_0xfff3;_0x149edd[_0x2a06('0x2a')][_0x2a06('0x2d')]=_0xfff3;_0x149edd['console'][_0x2a06('0x16')]=_0xfff3;_0x149edd[_0x2a06('0x2a')]['trace']=_0xfff3;}else{const _0xb8387c={};_0xb8387c['log']=_0xfff3;_0xb8387c[_0x2a06('0x13')]=_0xfff3;_0xb8387c[_0x2a06('0x38')]=_0xfff3;_0xb8387c[_0x2a06('0x17')]=_0xfff3;_0xb8387c[_0x2a06('0x33')]=_0xfff3;_0xb8387c[_0x2a06('0x2d')]=_0xfff3;_0xb8387c['table']=_0xfff3;_0xb8387c[_0x2a06('0x1a')]=_0xfff3;return _0xb8387c;}}(_0x403f21);}else{_0x149edd[_0x2a06('0x2a')]=function(_0x246ac4){const _0x8410e5={};_0x8410e5[_0x2a06('0x24')]=_0x246ac4;_0x8410e5[_0x2a06('0x13')]=_0x246ac4;_0x8410e5[_0x2a06('0x38')]=_0x246ac4;_0x8410e5[_0x2a06('0x17')]=_0x246ac4;_0x8410e5['error']=_0x246ac4;_0x8410e5[_0x2a06('0x2d')]=_0x246ac4;_0x8410e5[_0x2a06('0x16')]=_0x246ac4;_0x8410e5[_0x2a06('0x1a')]=_0x246ac4;return _0x8410e5;}(_0x403f21);}}else{if(_0x2609cc['oJrOR'](_0x2609cc[_0x2a06('0x37')],_0x2609cc[_0x2a06('0x6')])){console[_0x2a06('0x24')](_0x2609cc[_0x2a06('0x9')]);const _0x14d6e7={};_0x14d6e7['body']=response['body'];$[_0x2a06('0x10')](_0x14d6e7);}else{const _0x1d2b03=_0x2a06('0x14')[_0x2a06('0x1f')]('|');let _0x40da5c=0x0;while(!![]){switch(_0x1d2b03[_0x40da5c++]){case'0':_0x149edd[_0x2a06('0x2a')]['trace']=_0x403f21;continue;case'1':_0x149edd['console'][_0x2a06('0x38')]=_0x403f21;continue;case'2':_0x149edd['console']['error']=_0x403f21;continue;case'3':_0x149edd[_0x2a06('0x2a')][_0x2a06('0x17')]=_0x403f21;continue;case'4':_0x149edd[_0x2a06('0x2a')][_0x2a06('0x13')]=_0x403f21;continue;case'5':_0x149edd[_0x2a06('0x2a')]['table']=_0x403f21;continue;case'6':_0x149edd[_0x2a06('0x2a')][_0x2a06('0x24')]=_0x403f21;continue;case'7':_0x149edd['console'][_0x2a06('0x2d')]=_0x403f21;continue;}break;}}}});_0x4bbe17();const regex=/^https:\/\/[^\/]*\.(.*\.cn)(\/\w+\/[a-z0-9]{32}\/[a-z0-9]{32}\.m3u8)(\?.*)?/;let modifiedUrl='';let url=$request['url'];const match=url['match'](regex);if(match){modifiedUrl=_0x2a06('0x3b')+match[0x1]+match[0x2]+match[0x3];$[_0x2a06('0x27')](modifiedUrl)[_0x2a06('0x3e')](_0x530e4a=>{const _0x1813eb={};_0x1813eb[_0x2a06('0x26')]='ËßÜÈ¢ëÂ∑≤Ëß£ÈîÅ';const _0x256922=_0x1813eb;console[_0x2a06('0x24')](_0x256922['bPeVD']);const _0x4ba397={};_0x4ba397['body']=_0x530e4a[_0x2a06('0x25')];$[_0x2a06('0x10')](_0x4ba397);});}

function Env(a,b){var c=Math.floor;return new class{constructor(a,b){this.name=a,this.version="1.7.4",this.data=null,this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="",this.encoding="utf-8",this.startTime=new Date().getTime(),Object.assign(this,b),this.log("","üîî"+this.name+", ÂºÄÂßã!")}platform(){return"undefined"!=typeof $environment&&$environment["surge-version"]?"Surge":"undefined"!=typeof $environment&&$environment["stash-version"]?"Stash":"undefined"==typeof module||!module.exports?"undefined"==typeof $task?"undefined"==typeof $loon?"undefined"==typeof $rocket?"undefined"==typeof Egern?void 0:"Egern":"Shadowrocket":"Loon":"Quantumult X":"Node.js"}isQuanX(){return"Quantumult X"===this.platform()}isSurge(){return"Surge"===this.platform()}isLoon(){return"Loon"===this.platform()}isShadowrocket(){return"Shadowrocket"===this.platform()}isStash(){return"Stash"===this.platform()}isEgern(){return"Egern"===this.platform()}toObj(a,b=null){try{return JSON.parse(a)}catch{return b}}toStr(a,b=null){try{return JSON.stringify(a)}catch{return b}}lodash_get(a={},b="",c=void 0){Array.isArray(b)||(b=this.toPath(b));const d=b.reduce((a,b)=>Object(a)[b],a);return d===void 0?c:d}lodash_set(a={},b="",c){return Array.isArray(b)||(b=this.toPath(b)),b.slice(0,-1).reduce((a,c,d)=>Object(a[c])===a[c]?a[c]:a[c]=/^d+$/.test(b[d+1])?[]:{},a)[b[b.length-1]]=c,a}toPath(a){return a.replace(/[(d+)]/g,".$1").split(".").filter(Boolean)}getItem(a=new String,b=null){let c=b;switch(a.startsWith("@")){case!0:const{key:b,path:d}=a.match(/^@(?<key>[^.]+)(?:.(?<path>.*))?$/)?.groups;a=b;let e=this.getItem(a,{});"object"!=typeof e&&(e={}),c=this.lodash_get(e,d);try{c=JSON.parse(c)}catch(a){}break;default:switch(this.platform()){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":c=$persistentStore.read(a);break;case"Quantumult X":c=$prefs.valueForKey(a);break;default:c=this.data?.[a]||null}try{c=JSON.parse(c)}catch(a){}}return c??b}setItem(a=new String,b=new String){let c=!1;switch(typeof b){case"object":b=JSON.stringify(b);break;default:b=b+""}switch(a.startsWith("@")){case!0:const{key:d,path:e}=a.match(/^@(?<key>[^.]+)(?:.(?<path>.*))?$/)?.groups;a=d;let f=this.getItem(a,{});"object"!=typeof f&&(f={}),this.lodash_set(f,e,b),c=this.setItem(a,f);break;default:switch(this.platform()){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":c=$persistentStore.write(b,a);break;case"Quantumult X":c=$prefs.setValueForKey(b,a);break;default:c=this.data?.[a]||null}}return c}async fetch(a={},b={}){switch(a.constructor){case Object:a={...a,...b};break;case String:a={url:a,...b}}a.method||(a.method=a.body??a.bodyBytes?"POST":"GET"),delete a.headers?.Host,delete a.headers?.[":authority"],delete a.headers?.["Content-Length"],delete a.headers?.["content-length"];const c=a.method.toLocaleLowerCase();switch(this.platform()){case"Loon":case"Surge":case"Stash":case"Egern":case"Shadowrocket":default:return a.policy&&(this.isLoon()&&(a.node=a.policy),this.isStash()&&this.lodash_set(a,"headers.X-Stash-Selected-Proxy",encodeURI(a.policy))),a.followRedirect&&((this.isSurge()||this.isLoon())&&(a["auto-redirect"]=!1),this.isQuanX()&&(a.opts?a.opts.redirection=!1:a.opts={redirection:!1})),a.bodyBytes&&!a.body&&(a.body=a.bodyBytes,delete a.bodyBytes),await new Promise((b,d)=>{$httpClient[c](a,(c,e,f)=>{c?d(c):(e.ok=/^2dd$/.test(e.status),e.statusCode=e.status,f&&(e.body=f,!0==a["binary-mode"]&&(e.bodyBytes=f)),b(e))})});case"Quantumult X":return a.policy&&this.lodash_set(a,"opts.policy",a.policy),"boolean"==typeof a["auto-redirect"]&&this.lodash_set(a,"opts.redirection",a["auto-redirect"]),a.body instanceof ArrayBuffer?(a.bodyBytes=a.body,delete a.body):ArrayBuffer.isView(a.body)?(a.bodyBytes=a.body.buffer.slice(a.body.byteOffset,a.body.byteLength+a.body.byteOffset),delete object.body):a.body&&delete a.bodyBytes,await $task.fetch(a).then(a=>(a.ok=/^2dd$/.test(a.statusCode),a.status=a.statusCode,a),a=>Promise.reject(a.error))}}time(a,b=null){const d=b?new Date(b):new Date;let e={"M+":d.getMonth()+1,"d+":d.getDate(),"H+":d.getHours(),"m+":d.getMinutes(),"s+":d.getSeconds(),"q+":c((d.getMonth()+3)/3),S:d.getMilliseconds()};for(let c in/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(d.getFullYear()+"").slice(4-RegExp.$1.length))),e)new RegExp("("+c+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?e[c]:("00"+e[c]).slice((""+e[c]).length)));return a}getBaseURL(a){return a.replace(/[?#].*$/,"")}isAbsoluteURL(a){return/^[a-z][a-z0-9+.-]*:/.test(a)}getURLParameters(a){return(a.match(/([^?=&]+)(=([^&]*))/g)||[]).reduce((b,a)=>(b[a.slice(0,a.indexOf("="))]=a.slice(a.indexOf("=")+1),b),{})}getTimestamp(a=new Date){return c(a.getTime()/1e3)}queryStr(a){let b=[];for(let c in a)a.hasOwnProperty(c)&&b.push(c+'='+a[c]);let c=b.join("&");return c}queryObj(a){let b={},c=a.split("&");for(let d of c){let a=d.split("="),c=a[0],e=a[1]||"";c&&(b[c]=e)}return b}msg(a=this.name,b="",c="",d){const e=a=>{switch(typeof a){case void 0:return a;case"string":switch(this.platform()){case"Surge":case"Stash":case"Egern":default:return{url:a};case"Loon":case"Shadowrocket":return a;case"Quantumult X":return{"open-url":a}}case"object":switch(this.platform()){case"Surge":case"Stash":case"Egern":case"Shadowrocket":default:{let b=a.url||a.openUrl||a["open-url"];return{url:b}}case"Loon":{let b=a.openUrl||a.url||a["open-url"],c=a.mediaUrl||a["media-url"];return{openUrl:b,mediaUrl:c}}case"Quantumult X":{let b=a["open-url"]||a.url||a.openUrl,c=a["media-url"]||a.mediaUrl,d=a["update-pasteboard"]||a.updatePasteboard;return{"open-url":b,"media-url":c,"update-pasteboard":d}}}default:}};if(!this.isMute)switch(this.platform()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:$notification.post(a,b,c,e(d));break;case"Quantumult X":$notify(a,b,c,e(d))}}log(...a){0<a.length&&(this.logs=[...this.logs,...a]),console.log(a.join(this.logSeparator))}logErr(a,b){switch(this.platform()){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":case"Quantumult X":default:this.log("","‚ùóÔ∏è"+this.name+", ÈîôËØØ!",a,b)}}wait(a){return new Promise(b=>setTimeout(b,a))}done(a={}){const b=new Date().getTime(),c=(b-this.startTime)/1e3;switch(this.log("","üîî"+this.name+", ÁªìÊùü! üïõ"+c+"Áßí"),this.platform()){case"Surge":a.policy&&this.lodash_set(a,"headers.X-Surge-Policy",a.policy),$done(a);break;case"Loon":a.policy&&(a.node=a.policy),$done(a);break;case"Stash":a.policy&&this.lodash_set(a,"headers.X-Stash-Selected-Proxy",encodeURI(a.policy)),$done(a);break;case"Egern":$done(a);break;case"Shadowrocket":default:$done(a);break;case"Quantumult X":a.policy&&this.lodash_set(a,"opts.policy",a.policy),delete a["auto-redirect"],delete a["auto-cookie"],delete a["binary-mode"],delete a.charset,delete a.host,delete a.insecure,delete a.method,delete a.opt,delete a.path,delete a.policy,delete a["policy-descriptor"],delete a.scheme,delete a.sessionIndex,delete a.statusCode,delete a.timeout,a.body instanceof ArrayBuffer?(a.bodyBytes=a.body,delete a.body):ArrayBuffer.isView(a.body)?(a.bodyBytes=a.body.buffer.slice(a.body.byteOffset,a.body.byteLength+a.body.byteOffset),delete a.body):a.body&&delete a.bodyBytes,$done(a)}}}(a,b)}
